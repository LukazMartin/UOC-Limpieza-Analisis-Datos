---
title: 'PRÁCTICA 2: ¿Cómo realizar la limpieza y análisis de datos?'
author: "Lukaz Martin Doehne y Pablo Vadillo Berganza"
date: "04/01/2023"
output:
  pdf_document:
    toc: true
    toc_depth: 3
lang: es
tuthor: Laia Subirats Maté
---

\pagebreak

# 1.Descripción del dataset. ¿Por qué es importante y qué pregunta/problema pretende responder?

En primer lugar, cargaremos los datos con los que trabajar.

```{r echo=FALSE}
df <- read.csv('../data/heart.csv')
```

Nuestro dataset está compuesto por 303 registros y 14 variables. Contiene información clínica de pacientes con el fin de poder predecir la probabilidad de fallo cardíaco. 


Para ello, la variable a predecir, "output", contiene información acerca del estrechamiento de los vasos sanguíneos obtenida a través de una angiografía. Si el estrechamiento es inferior al 50% toma el valor 0 y por tanto el paciente no se considera en riesgo de padecer una enfermedad del corazón. Por el contrario, si el estrechamiento es superior al 50%, la variable tomará el valor 1 y el paciente tendrá una mayor probabilidad de ataque al corazón.


A partir de aquí, será interesante realizar un análisis del resto de campos para ver cuáles son determinantes en la predicción del fallo cardíaco.


Pero antes, vamos a realizar una breve exploración del dataset.

```{r}
str(df)
```

Todas las variables son numéricas.

```{r}
summary(df)
```

Para terminar con este apartado, vamos a explicar brevemente todos y cada uno de los campos del dataset:

  · Age: Edad de los pacientes en años. Toma valores entre 29 y 77. La media es 54,37.
  
  · Sex: Sexo de los pacientes. (1 = hombre; 0 = mujer).
  
  · Cp: Dolor de pecho. (1 = angina típica; 2 = angina atípica; 3 = dolor no anginal; 4 = asintomático).
  
  · Trtbps: Presión arterial en reposo. Se trata del valor tomado en el ingreso al hospital, en mm Hg. Toma valores entre 94 y 200, siendo la media de 131,6.
  
  · Chol: Colesterol sérico. Medido en mg/dl. Toma valores entre 126 y 564, con una media de 246,3.
  
  · Fbs: Nivel de azúcar en sangre en ayunas. (1 = > 120 mg/dl; 0 = <= 120 mg/dl).
  
  · Restecg: Resultados del electrocardiograma en reposo. (0 = normal; 1 = onda ST-T anómala; 2 = hipertrofia ventricular izquierda).
  
  · Thalachh: Máximo pulso cardíaco obtenido. Toma valores entre 71 y 202. La media es 149,6.
  
  · Exng: Angina inducida del ejercicio. (1 = sí; 0 = no).
  
  · Oldpeak: Depresión del segmento ST inducida por ejercicio relativo al descanso. Toma valores entre 0 y 6,2, con una media de 1,04.
  
  · Slp: Pendiente del segmento ST del pico del ejercicio. (1 = ascendente; 2 = plano; 3 = descendente).
  
  · Caa: Número de los principales vasos sanguíneos coloreados por la fluoroscopia. Toma valores entre 0 y 4, con una media de 0,73.
  
  · Thall: Talasemia. Menor nivel de hemoglobina. (1 = defecto fijo; 2 = normal; 3 = defecto reversible). El defecto fijo hace referencia a un defecto que ocurre tanto en reposo como durante el esfuerzo. El defecto reversible, por el contrario, hace referencia a un defecto que ocurre durante el esfuerzo que no existía durante el reposo.

  · Output: La variable a predecir. Diagnóstico de fallo cardíaco (0 = Estrechamiento de vasos sanguíneos < 50%; 1 = Estrechamiento de vasos sanguíneos > 50%).

# 2.Integración y selección 

# 3. Limpieza de los datos

En este apartado se corregirán los registros del csv que sean erróneos.

## 3.1. ¿Los datos contienen ceros o elementos vacíos? 

Podemos comprobar que no se encuentran elementos nulos en el csv con el siguiente código:

```{r}
sapply(df, function(x) sum(is.na(x)))
```


---TODO
Discretizar edad
----


## 3.2. Identifica y gestiona los valores extremos

Los valores extremos (*outliers*) son aquellos que se encuentran fuera del rango [Lo,Ho], donde:

  · Lo (Lower Outlier) = Q1 – (1.5 * IQR)
  
  · Ho (Higher Outlier) = Q3 + (1.5 * IQR)
  
y IQR = Q3 - Q1. También hay una fórmula que trata outliers los que sobrepasan la media +/- la desviación estándar, pero optaremos por fórmula descrita.


Encontramos varios outliers en los datos. Visualizamos los outliers de la columna **chol**. Que según definido en el dataset es el colesterol en mg/dl capturado con un sensor BMI.

```{r echo=FALSE}
boxplot(df$chol, horizontal = TRUE, xlab ="Chol (mg/dL)", col=c("blue"))
```

---
TODO

Quiza plotear todas las columnas pero que se puedan leer. Problema es que no estan en la misma escala (0-1 y 80-200)

---


# 4. Análisis de los datos

## 4.1. Selección de los grupos de datos que se quieren analizar/compara

## 4.2. Comprobación de la normalidad y homogeneidad de la varianza

## 4.3. Aplicación de pruebas estadísticas para comparar los grupos de datos

# 5. Representación de los resultados a partir de tablas y gráficas

# 6. Resolución del problema

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars, echo=FALSE}
summary(cars)
```

